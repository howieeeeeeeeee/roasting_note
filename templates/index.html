{% extends "base.html" %}

{% block title %}Dashboard - RoastLogger{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Roast Dashboard</h1>
    <a href="{{ url_for('roast_new') }}" class="btn btn-primary">Start New Roast</a>
</div>

{% if roasts %}
<div class="roasts-table-container">
    <table class="roasts-table">
        <thead>
            <tr>
                <th>Roast Name</th>
                <th>Bean</th>
                <th>Date</th>
                <th>Weight</th>
                <th>Duration</th>
                <th>After FC</th>
                <th>Loss %</th>
                <th class="actions-column">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for roast in roasts %}
            <tr class="roast-row">
                <td class="roast-name-cell">
                    <a href="{{ url_for('roast_detail', roast_id=roast._id) }}" class="roast-link">
                        {{ roast.title }}
                    </a>
                </td>
                <td>
                    <span class="bean-label" style="background-color: {{ roast.bean_color }}4D; color: {{ roast.bean_color }};">
                        {{ roast.bean_name }}
                    </span>
                </td>
                <td class="date-cell">{{ roast.roast_date.strftime('%Y-%m-%d') if roast.roast_date else 'N/A' }}</td>
                <td>
                    {% if roast.original_weight_grams %}
                        {{ roast.original_weight_grams }}g
                    {% else %}
                        <span class="text-muted">N/A</span>
                    {% endif %}
                </td>
                <td>
                    {% if roast.total_duration_seconds %}
                        {{ roast.total_duration_seconds | format_seconds }}
                    {% else %}
                        <span class="text-muted">N/A</span>
                    {% endif %}
                </td>
                <td>
                    {% if roast.time_after_fc %}
                        {{ roast.time_after_fc | format_seconds }}
                    {% else %}
                        <span class="text-muted">-</span>
                    {% endif %}
                </td>
                <td>
                    {% if roast.weight_loss_percentage %}
                        <span class="loss-badge">{{ roast.weight_loss_percentage }}%</span>
                    {% else %}
                        <span class="text-muted">N/A</span>
                    {% endif %}
                </td>
                <td class="actions-cell">
                    <div class="action-buttons">
                        <a href="{{ url_for('roast_detail', roast_id=roast._id) }}" class="btn-icon" title="View">
                            <span class="material-icons">visibility</span>
                        </a>
                        <a href="{{ url_for('roast_edit_form', roast_id=roast._id) }}" class="btn-icon" title="Edit">
                            <span class="material-icons">edit</span>
                        </a>
                        <form action="{{ url_for('api_roast_delete', roast_id=roast._id) }}" method="POST" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this roast?');">
                            <button type="submit" class="btn-icon btn-icon-danger" title="Delete">
                                <span class="material-icons">delete</span>
                            </button>
                        </form>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="empty-state">
    <p>No roasts recorded yet. Start your first roast!</p>
    <a href="{{ url_for('roast_new') }}" class="btn btn-primary">Start Your First Roast</a>
</div>
{% endif %}
{% endblock %}
